# Using Tcl Scripts

Here is a sample Tcl script to run in InTime.
```Tcl
# Sample script for InTime Optimization. Works in Windows & Linux environments
# Adjust the run_target, runs_per_round and round variables according to your recipe
flow reset
flow set run_target private_cloud
flow set runs_per_round 40
flow set rounds 1
flow set concurrent_runs 10
flow set control_create_bitstreams false
flow run_recipe "hot_start"
```

Let's say you have saved the above as ```intimeflow.tcl```
To run InTime in commandline mode, execute the following command:
<InTime installation dir>/intime.sh -mode batch -platform minimal -project <your XPR or DCP or nonproject mode Tcl file> -vendor_toolchain vivado -vendor_toolchain_version <e.g. 2019.1.0> -s intimeflow.tcl

Explanation:

    -mode batch: Run in batch mode
    -platform minimal: Run in non-GUI mode
    -project: The project to open
    -vendor_toolchain: Name of the FPGA tool e.g. vivado
    -vendor_toolchain_version: E.g. 2019.1.0
    -s <Tcl script>: Tcl script to execute

# Sample Designs

### [Non-project mode](nonproject_mode/)

**Available in InTime version 2.6.11 onwards** - Older versions of InTime only support the Tcl-based flow either in project mode or via a DCP.

This is a sample project to demonstrate how to use InTime in non-project mode. To use this build script, treat it like a project file, e.g. XPR, and open it directly in InTime.

#### Description
The Tcl file is a typical build script. It reads in a list of files. 

```Tcl
# 
# Synthesis run script generated by Vivado
# 
read_verilog {
  alu.v
  data_mux.v
  ins_decode.v
  ins_rom.v
  io.v
  prgm_cntr.v
  reg_file.v
  spcl_regs.v
  eight_bit_uc.v
}
read_xdc eight_bit_uc.sdc
```
After that it executes the specified compilation steps. Note that in this case the "top" and "part" variables are specified
```Tcl
synth_design -top eight_bit_uc -part xc7k70tfbg484-2

write_checkpoint -force -noxdef eight_bit_uc_synth.dcp

set rc [catch {
  opt_design 
  write_checkpoint -force eight_bit_uc_opt.dcp
} RESULT]
if {$rc} {
  return -code error $RESULT
}

...
...
```
### [Project mode](project_mode/)

Run the Tcl script ```create_project.tcl``` to create an XPR project.

1. The default target device is "xc7k70tfbg484-2". To target another device, please change the following parameter inside the create_project.tcl script:
```Tcl
# define target device
set part "xc7k70tfbg484-2"
...
```
2. Execute create_project.tcl in the local directory:
<vivado_installation>/bin/vivado -mode batch -s create_project.tcl
Do note that the project will be created by the same Vivado version in <vivado_installation>/bin/vivado.

3. After the script is completed, a XPR project named "eight_bit_uc" will be created in the local directory.

To open the project in GUI mode, run the following command:
```<vivado_installation>/bin/vivado -mode gui -project ./eight_bit_uc.xpr```

